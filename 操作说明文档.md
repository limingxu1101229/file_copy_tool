# 文件复制工具操作说明

## 工具简介

本工具用于按文件名（不含后缀）一致规则，将指定文件夹内特定后缀文件，复制到目标文件夹对应子文件夹。支持重复规避和配置留存功能，适用于多次重复操作场景。

## 核心功能

1. **精准匹配复制**：按文件名（不含后缀）一致规则匹配文件
2. **重复规避**：已存在的文件不重复复制
3. **配置留存**：保存默认配置，支持重复调用
4. **操作日志**：记录复制成功/跳过情况

## 安装与运行

### 环境要求

- Python 3.6 及以上版本
- 无需额外安装依赖库（使用Python标准库）

### 运行方法

1. 打开命令行终端
2. 进入程序所在目录
3. 执行命令：`python file_copy_tool.py`

## 使用步骤

### 图形界面使用（推荐）

1. 直接运行程序：`python file_copy_tool.py`
2. 程序会自动启动图形界面
3. **配置设置**：
   - 源目录：点击"浏览"按钮选择包含待复制文件的文件夹
   - 目标目录：点击"浏览"按钮选择需要复制到的目标文件夹（工具会遍历其所有子文件夹）
   - 文件后缀：输入需要复制的文件后缀（如 `.jpg`、`.pdf` 等）
4. 点击"保存配置"按钮保存当前配置
5. 点击"执行复制"按钮开始复制文件
6. 操作日志会实时显示在界面下方的日志区域

### 命令行界面使用

1. 运行程序并添加命令行参数：`python file_copy_tool.py cli`
2. 按照菜单提示进行操作

#### 首次使用

1. 选择菜单选项 `2. 修改配置`
2. 依次输入：
   - 源目录：包含待复制文件的文件夹路径
   - 目标目录：需要复制到的目标文件夹路径（工具会遍历其所有子文件夹）
   - 文件后缀：需要复制的文件后缀（如 `.jpg`、`.pdf` 等）
3. 选择菜单选项 `3. 执行文件复制` 开始复制

#### 重复使用

1. 运行程序后，系统会自动读取上次保存的配置
2. 如需修改配置，选择菜单选项 `2. 修改配置`
3. 选择菜单选项 `3. 执行文件复制` 开始复制

## 界面说明

### 图形界面

1. **配置信息区域**：
   - 源目录：显示和设置待复制文件所在的文件夹
   - 目标目录：显示和设置文件需要复制到的目标文件夹
   - 文件后缀：显示和设置需要复制的文件后缀
   - 浏览按钮：用于选择文件夹路径

2. **操作按钮区域**：
   - 保存配置：保存当前的配置信息
   - 执行复制：按照当前配置执行文件复制操作
   - 清空日志：清空界面上的操作日志

3. **复制进度区域**：
   - 进度条：以图形方式显示文件复制的进度
   - 百分比显示：实时显示当前复制进度的百分比
   - 复制过程中自动更新，复制完成后重置

4. **操作日志区域**：
   - 实时显示操作过程中的日志信息
   - 包含时间戳和详细的操作描述
   - 支持自动滚动到最新日志

### 命令行菜单

#### 1. 查看当前配置

显示当前保存的配置信息，包括：
- 源目录
- 目标目录
- 文件后缀

#### 2. 修改配置

修改配置信息，直接回车可保持当前值不变。

#### 3. 执行文件复制

按照当前配置执行文件复制操作，流程如下：
1. 构建目标文件索引
2. 匹配源文件与目标路径
3. 执行增量复制（跳过已存在文件）
4. 保存操作日志

#### 4. 退出

退出程序。

## 配置文件说明

程序会在当前目录生成 `config.ini` 配置文件，格式如下：

```ini
[DEFAULT]
source_dir = 源目录路径
target_dir = 目标目录路径
file_extension = 文件后缀
```

您也可以直接编辑此文件修改配置。

## 日志文件说明

程序会在当前目录生成 `copy_log.txt` 日志文件，记录每次操作的详细信息，包括：
- 操作时间
- 复制成功的文件列表
- 跳过的文件列表
- 复制失败的文件列表及错误原因

## 常见问题

### Q1：程序提示"源目录无效"或"目标目录无效"

A1：请检查输入的目录路径是否正确，确保路径存在且具有访问权限。

### Q2：程序提示"文件后缀不能为空"

A2：请确保输入了正确的文件后缀，如 `.jpg`、`.pdf` 等。

### Q3：为什么有些文件没有被复制？

A3：请检查：
1. 源文件是否具有指定的文件后缀
2. 目标文件夹中是否存在同名（不含后缀）的文件
3. 源文件是否具有读取权限
4. 目标文件夹是否具有写入权限

### Q4：如何批量复制多种类型的文件？

A4：目前工具只支持单一文件后缀的复制。如需复制多种类型文件，可多次运行程序，每次设置不同的文件后缀。

## 示例用法

### 示例场景

假设有以下目录结构：

```
源目录：D:\source\
├── file1.jpg
├── file2.jpg
└── file3.txt

目标目录：D:\target\
├── subdir1\
│   └── file1.pdf
└── subdir2\
    └── file2.docx
```

### 操作步骤

1. 运行程序，选择 `2. 修改配置`
2. 输入：
   - 源目录：`D:\source`
   - 目标目录：`D:\target`
   - 文件后缀：`.jpg`
3. 选择 `3. 执行文件复制`

### 预期结果

```
D:\target\
├── subdir1\
│   ├── file1.pdf
│   └── file1.jpg  # 复制成功
└── subdir2\
    ├── file2.docx
    └── file2.jpg  # 复制成功
```

### 日志记录

```
==================================================
操作时间：2025-12-01 10:00:00
复制成功：file1.jpg -> D:\target\subdir1
复制成功：file2.jpg -> D:\target\subdir2
跳过：file3.txt 不符合文件后缀要求
```

## 注意事项

1. 请确保源目录和目标目录具有正确的访问权限
2. 程序会遍历目标目录下的所有子文件夹，请确保目标目录结构合理
3. 如遇大量文件复制，建议分批操作
4. 请定期清理日志文件，避免占用过多磁盘空间

## 版本信息

- 版本：1.0.0
- 发布日期：2025-12-01
- 开发者：AI Assistant
